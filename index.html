<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Story of Learning - into3.ai</title>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            background: #000;
        }

        /* Frame Container */
        .frame-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }

        /* Individual Frame */
        .frame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1.2s ease-in-out;
            pointer-events: none;
        }

        .frame.active {
            opacity: 1;
            pointer-events: auto;
        }

        /* Full-Size Background Image */
        .frame-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        /* Overlay for Better Contrast */
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0.3) 60%, transparent 100%);
            z-index: 1;
        }

        /* Text Content - Left Side */
        .text-content {
            position: absolute;
            left: 8%;
            top: 50%;
            transform: translateY(-50%);
            z-index: 3;
            width: 45%;
            max-width: 650px;
        }

        /* Text Lines - Consistent Styling */
        .text-line {
            font-size: 2.8rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.95);
            line-height: 1.4;
            margin-bottom: 0.8rem;
            text-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.8),
                0 4px 16px rgba(0, 0, 0, 0.6);
            opacity: 0;
        }

        /* Auto-adjust for longer text */
        .text-line.long {
            font-size: 2.4rem;
        }

        /* Fade in animation for all lines */
        .text-line.fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }

        @keyframes fadeIn {
            from { 
                opacity: 0;
                transform: translateY(10px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Purple Glow Highlight for Important Words */
        .highlight {
            color: #a855f7;
            font-weight: 700;
            text-shadow: 
                0 0 20px rgba(168, 85, 247, 0.8),
                0 0 40px rgba(168, 85, 247, 0.6),
                0 0 60px rgba(168, 85, 247, 0.4);
            animation: purpleGlow 2.5s ease-in-out infinite;
        }

        @keyframes purpleGlow {
            0%, 100% { 
                text-shadow: 
                    0 0 20px rgba(168, 85, 247, 0.8),
                    0 0 40px rgba(168, 85, 247, 0.6),
                    0 0 60px rgba(168, 85, 247, 0.4);
            }
            50% { 
                text-shadow: 
                    0 0 30px rgba(168, 85, 247, 1),
                    0 0 60px rgba(168, 85, 247, 0.8),
                    0 0 90px rgba(168, 85, 247, 0.6);
            }
        }

        /* Character Image - Right Side */
        .character-image {
            position: absolute;
            right: 8%;
            top: 50%;
            transform: translateY(-50%);
            z-index: 2;
            width: 35%;
            max-width: 500px;
            height: auto;
            opacity: 0;
        }

        .character-image img {
            width: 100%;
            height: auto;
            object-fit: contain;
            filter: drop-shadow(0 10px 30px rgba(168, 85, 247, 0.5));
        }

        /* Character Animation: Glow In, then Fade Out */
        .character-image.active {
            animation: characterAppear 1s ease-out forwards;
        }

        @keyframes characterAppear {
            0% {
                opacity: 0;
                transform: translateY(-50%) scale(0.9);
                filter: drop-shadow(0 0 50px rgba(168, 85, 247, 1)) brightness(1.5);
            }
            50% {
                opacity: 1;
                transform: translateY(-50%) scale(1.02);
                filter: drop-shadow(0 10px 50px rgba(168, 85, 247, 0.8)) brightness(1.3);
            }
            100% {
                opacity: 1;
                transform: translateY(-50%) scale(1);
                filter: drop-shadow(0 10px 30px rgba(168, 85, 247, 0.5)) brightness(1);
            }
        }

        /* Skip Button */
        .skip-btn {
            position: fixed;
            top: 30px;
            right: 30px;
            z-index: 100;
            padding: 12px 28px;
            background: rgba(168, 85, 247, 0.2);
            border: 2px solid rgba(168, 85, 247, 0.6);
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            border-radius: 25px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .skip-btn:hover {
            background: rgba(168, 85, 247, 0.4);
            border-color: rgba(168, 85, 247, 1);
            transform: scale(1.05);
        }

        /* Progress Indicators */
        .progress-container {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            display: flex;
            gap: 12px;
        }

        .progress-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .progress-dot.active {
            background: #a855f7;
            width: 30px;
            border-radius: 5px;
            box-shadow: 0 0 20px rgba(168, 85, 247, 0.8);
        }

        .progress-dot:hover {
            background: rgba(168, 85, 247, 0.6);
            transform: scale(1.2);
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .loading-text {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 2rem;
            color: #a855f7;
        }

        .loading-bar-container {
            width: 300px;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }

        .loading-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #a855f7, #ec4899);
            transition: width 0.3s ease;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .text-content {
                width: 55%;
            }
            .text-line {
                font-size: 2.2rem;
            }
            .text-line.long {
                font-size: 1.9rem;
            }
            .character-image {
                width: 30%;
            }
        }

        @media (max-width: 768px) {
            .text-content {
                width: 85%;
                left: 7.5%;
            }
            .text-line {
                font-size: 1.8rem;
            }
            .text-line.long {
                font-size: 1.5rem;
            }
            .character-image {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-text">Loading Story...</div>
        <div class="loading-bar-container">
            <div class="loading-bar" id="loadingBar"></div>
        </div>
    </div>

    <!-- Skip Button -->
    <button class="skip-btn" id="skipBtn">Skip Intro</button>

    <!-- Progress Indicators -->
    <div class="progress-container" id="progressContainer"></div>

    <!-- Frame Container -->
    <div class="frame-container" id="frameContainer"></div>

    <script>
        // Frame Data with Text and Images
        const frames = [
            {
                background: 'https://i.ibb.co/Wv45YC7f/1.webp',
                character: null,
                lines: [
                    { text: 'Do you know who the <span class="highlight">first student</span> was?' },
                    { text: 'Or where the first classroom began?' }
                ]
            },
            {
                background: 'https://i.ibb.co/8gpqnHRg/2.webp',
                character: null,
                lines: [
                    { text: 'It began nearly <span class="highlight">three thousand years</span> ago —' },
                    { text: 'in the kingdom of Mithila.' }
                ]
            },
            {
                background: 'https://i.ibb.co/Vf13RgT/3.webp',
                character: null,
                lines: [
                    { text: 'There was a king — <span class="highlight">Janaka</span> —' },
                    { text: 'who wanted his son to learn what power couldn\'t teach.' },
                    { text: 'So he sent him away to Rishi Yajnavalkya.' }
                ]
            },
            {
                background: 'https://i.ibb.co/RGzgz7Nh/4.webp',
                character: null,
                lines: [
                    { text: '<span class="highlight">One teacher.</span>' },
                    { text: '<span class="highlight">One student.</span>' },
                    { text: 'One conversation that built <span class="highlight">understanding</span>.' }
                ]
            },
            {
                background: 'https://i.ibb.co/wFgwYfb8/5.webp',
                character: null,
                lines: [
                    { text: 'Learning was slow, personal, <span class="highlight">precise</span> —' },
                    { text: 'and for centuries, it belonged only to a few.' }
                ]
            },
            {
                background: 'https://i.ibb.co/vC2hqF4q/6.webp',
                character: null,
                lines: [
                    { text: 'Then the <span class="highlight">world changed</span>.' },
                    { text: 'Kingdoms faded.' },
                    { text: 'Democracy rose.' }
                ]
            },
            {
                background: 'https://i.ibb.co/DggFMr0c/7.webp',
                character: null,
                lines: [
                    { text: 'And with it came a new idea —' },
                    { text: 'education should not be the privilege of kings,' },
                    { text: 'but the <span class="highlight">right of everyone</span>.' }
                ]
            },
            {
                background: 'https://i.ibb.co/sJDcH5d5/8.webp',
                character: null,
                lines: [
                    { text: 'It was a <span class="highlight">beautiful idea</span> —' },
                    { text: 'and a quiet compromise.' }
                ]
            },
            {
                background: 'https://i.ibb.co/GQB2NRdg/9.webp',
                character: null,
                lines: [
                    { text: 'To teach everyone,' },
                    { text: 'we had to teach <span class="highlight">together</span>.' },
                    { text: 'One teacher. Many students.' }
                ]
            },
            {
                background: 'https://i.ibb.co/B581VGWt/10.webp',
                character: null,
                lines: [
                    { text: 'It worked.' },
                    { text: 'It made learning accessible.' },
                    { text: 'But it also made it <span class="highlight">identical</span>.' }
                ]
            },
            {
                background: 'https://i.ibb.co/Wp4KgrJF/11.webp',
                character: null,
                lines: [
                    { text: 'We moved from the <span class="highlight">best education for a few</span>' },
                    { text: 'to some education for all.' }
                ]
            },
            {
                background: 'https://i.ibb.co/TMcL3RLJ/12.webp',
                character: null,
                lines: [
                    { text: 'And that was needed at that time and hence correct.' },
                    { text: 'But is it still correct in the age of <span class="highlight">artificial Intelligence</span>?' }
                ]
            },
            {
                background: 'https://i.ibb.co/LX3ykjQg/13.webp',
                character: null,
                lines: [
                    { text: 'For generations we accepted it,' },
                    { text: 'because some learning felt better than none.' },
                    { text: 'But the <span class="highlight">world has changed again</span>.' }
                ]
            },
            {
                background: 'https://i.ibb.co/33t04XV/14.webp',
                character: null,
                lines: [
                    { text: 'Everything else has become <span class="highlight">personal</span> —' },
                    { text: 'our music, our medicine, our feeds —' },
                    { text: 'except learning.' }
                ]
            },
            {
                background: 'https://i.ibb.co/C5smbhbP/15.webp',
                character: null,
                lines: [
                    { text: 'It still assumes every mind learns the same way.' },
                    { text: 'And maybe that made sense once.' },
                    { text: 'But <span class="highlight">not anymore</span>.' }
                ]
            },
            {
                background: 'https://i.ibb.co/BHqQ6ftx/16.webp',
                character: null,
                lines: [
                    { text: 'If the best learning was <span class="highlight">human, one-to-one</span>, and deeply personal —' },
                    { text: 'maybe that\'s where its <span class="highlight">future</span> belongs.' }
                ]
            }
        ];

        let currentFrameIndex = 0;
        let autoPlayTimeout;
        const frameContainer = document.getElementById('frameContainer');
        const progressContainer = document.getElementById('progressContainer');
        const skipBtn = document.getElementById('skipBtn');
        const loadingScreen = document.getElementById('loadingScreen');
        const loadingBar = document.getElementById('loadingBar');

        // Calculate reading time for each frame based on text length
        function calculateFrameDuration(frame) {
            const totalText = frame.lines.map(line => {
                // Remove HTML tags to count actual text
                const div = document.createElement('div');
                div.innerHTML = line.text;
                return div.textContent || div.innerText || '';
            }).join(' ');
            
            const wordCount = totalText.split(/\s+/).length;
            const lineCount = frame.lines.length;
            
            // Reading speed: ~200-250 words per minute = ~3-4 words per second
            // Base time: 3 seconds minimum
            // Add 0.5 seconds per line for animation delays
            // Add time based on word count
            const baseTime = 3000;
            const timePerWord = 400; // 400ms per word (150 words per minute reading speed)
            const timePerLine = 500; // 500ms per line for staggered animation
            
            const calculatedTime = baseTime + (wordCount * timePerWord) + (lineCount * timePerLine);
            
            // Clamp between 4 and 9 seconds
            return Math.min(Math.max(calculatedTime, 4000), 9000);
        }

        // Store durations for all frames
        const frameDurations = frames.map(frame => calculateFrameDuration(frame));

        // Preload all images
        function preloadImages() {
            const imageUrls = frames.map(f => f.background).filter(url => url);
            let loadedCount = 0;

            return Promise.all(
                imageUrls.map(url => {
                    return new Promise((resolve) => {
                        const img = new Image();
                        img.onload = () => {
                            loadedCount++;
                            const progress = (loadedCount / imageUrls.length) * 100;
                            loadingBar.style.width = progress + '%';
                            resolve();
                        };
                        img.onerror = () => {
                            loadedCount++;
                            const progress = (loadedCount / imageUrls.length) * 100;
                            loadingBar.style.width = progress + '%';
                            resolve();
                        };
                        img.src = url;
                    });
                })
            );
        }

        // Create Frame Elements
        function createFrames() {
            frames.forEach((frame, index) => {
                const frameDiv = document.createElement('div');
                frameDiv.className = 'frame';
                frameDiv.setAttribute('data-frame', index);

                // Background
                const background = document.createElement('div');
                background.className = 'frame-background';
                background.style.backgroundImage = `url('${frame.background}')`;
                frameDiv.appendChild(background);

                // Overlay
                const overlay = document.createElement('div');
                overlay.className = 'overlay';
                frameDiv.appendChild(overlay);

                // Text Content
                const textContent = document.createElement('div');
                textContent.className = 'text-content';

                frame.lines.forEach((line, lineIndex) => {
                    const textLine = document.createElement('div');
                    textLine.className = 'text-line';
                    
                    // Add long class if text is too long
                    if (line.text.length > 80) {
                        textLine.classList.add('long');
                    }

                    textLine.innerHTML = line.text;
                    textContent.appendChild(textLine);
                });

                frameDiv.appendChild(textContent);

                // Character Image (if exists)
                if (frame.character) {
                    const charImg = document.createElement('div');
                    charImg.className = 'character-image';
                    charImg.innerHTML = `<img src="${frame.character}" alt="Character">`;
                    frameDiv.appendChild(charImg);
                }

                frameContainer.appendChild(frameDiv);
            });
        }

        // Create Progress Dots
        function createProgressDots() {
            frames.forEach((_, index) => {
                const dot = document.createElement('div');
                dot.className = 'progress-dot';
                dot.setAttribute('data-index', index);
                dot.addEventListener('click', () => goToFrame(index));
                progressContainer.appendChild(dot);
            });
        }

        // Animate Text Lines
        function animateText(frameElement) {
            const textLines = frameElement.querySelectorAll('.text-line');
            
            textLines.forEach((line, index) => {
                const delay = index * 400; // 400ms between each line

                setTimeout(() => {
                    line.classList.add('fade-in');
                }, delay);
            });

            // Animate character image if exists
            const charImage = frameElement.querySelector('.character-image');
            if (charImage) {
                setTimeout(() => {
                    charImage.classList.add('active');
                }, 300);
            }
        }

        // Show Frame
        function showFrame(index) {
            const frameElements = document.querySelectorAll('.frame');
            const progressDots = document.querySelectorAll('.progress-dot');

            frameElements.forEach((frame, i) => {
                if (i === index) {
                    // Remove any existing animations first
                    const lines = frame.querySelectorAll('.text-line');
                    lines.forEach(line => {
                        line.classList.remove('fade-in');
                        // Force reflow to restart animation
                        void line.offsetWidth;
                    });
                    
                    const charImage = frame.querySelector('.character-image');
                    if (charImage) {
                        charImage.classList.remove('active');
                        void charImage.offsetWidth;
                    }
                    
                    // Activate frame
                    frame.classList.add('active');
                    
                    // Start animations after frame is visible
                    setTimeout(() => animateText(frame), 100);
                } else {
                    frame.classList.remove('active');
                }
            });

            progressDots.forEach((dot, i) => {
                if (i === index) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });

            currentFrameIndex = index;
        }

        // Go to Specific Frame
        function goToFrame(index) {
            clearTimeout(autoPlayTimeout);
            showFrame(index);
            startAutoPlay();
        }

        // Next Frame
        function nextFrame() {
            if (currentFrameIndex < frames.length - 1) {
                showFrame(currentFrameIndex + 1);
                startAutoPlay();
            } else {
                endStory();
            }
        }

        // Start Auto Play with dynamic timing
        function startAutoPlay() {
            clearTimeout(autoPlayTimeout);
            const duration = frameDurations[currentFrameIndex];
            autoPlayTimeout = setTimeout(nextFrame, duration);
        }

        // End Story
        function endStory() {
            clearTimeout(autoPlayTimeout);
            window.location.href = 'main.html';
        }

        // Skip Button
        skipBtn.addEventListener('click', endStory);

        // Keyboard Navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') {
                goToFrame(Math.min(currentFrameIndex + 1, frames.length - 1));
            } else if (e.key === 'ArrowLeft') {
                goToFrame(Math.max(currentFrameIndex - 1, 0));
            } else if (e.key === 'Escape') {
                endStory();
            }
        });

        // Initialize
        async function init() {
            await preloadImages();
            
            // Hide loading screen
            loadingScreen.style.transition = 'opacity 0.5s ease';
            loadingScreen.style.opacity = '0';
            setTimeout(() => {
                loadingScreen.style.display = 'none';
            }, 500);

            createFrames();
            createProgressDots();
            showFrame(0);
            startAutoPlay();
        }

        // Start when page loads
        window.addEventListener('load', init);
    </script>
</body>
</html>
